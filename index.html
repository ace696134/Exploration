<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Endless Requium</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
</head>
<body>
  <!-- ===== TITLE SCREEN ===== -->
  <div id="titleScreen">
    <div class="bg-overlay"></div>

    <h1 class="title">ENDLESS REQUIUM</h1>
    <p class="subtitle">A Descent Into the Quiet</p>

    <div class="menu-buttons">
      <button id="btnContinue" class="btn">Continue</button>
      <button id="btnNew" class="btn">New Run</button>
      <button id="btnExtras" class="btn">Extras</button>
      <button id="btnSettings" class="btn">Settings</button>
    </div>
  </div>

  <!-- Fade Container for transitions -->
  <div class="bg-fade" id="fadeLayer"></div>

  <script>
    // ====== BACKGROUND ANIMATION ======
    const bg = document.querySelector('.bg-overlay');
    bg.style.background = "url('./images/title_bg.png') center/cover no-repeat fixed";

    // ====== ANIME.JS TITLE INTRO ======
    window.addEventListener('DOMContentLoaded', () => {
      anime({ targets: '.title', opacity: [0, 1], translateY: [-20, 0], duration: 1400, easing: 'easeOutExpo' });
      anime({ targets: '.subtitle', opacity: [0, 1], delay: 400, duration: 1200, easing: 'easeOutExpo' });
      anime({ targets: '.menu-buttons', opacity: [0, 1], translateY: [20, 0], delay: 900, duration: 1200, easing: 'easeOutExpo' });
    });

    // ====== BUTTON HANDLERS ======
    const fadeLayer = document.getElementById('fadeLayer');

    function fadeOut(callback) {
      fadeLayer.style.opacity = 1;
      setTimeout(callback, 900);
    }

    document.getElementById('btnNew').addEventListener('click', () => {
      localStorage.removeItem('saveData');
      fadeOut(() => { window.location.href = 'lore.html'; });
    });

    document.getElementById('btnContinue').addEventListener('click', () => {
      if (!localStorage.getItem('saveData')) return alert('No saved run found.');
      fadeOut(() => { window.location.href = 'lore.html'; });
    });

    document.getElementById('btnSettings').addEventListener('click', () => {
      alert('Settings coming soon');
    });

    document.getElementById('btnExtras').addEventListener('click', () => {
      alert('Extras coming soon');
    });
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Endless Requium</title>

  <link rel="stylesheet" href="styles.css">

  <!-- Anime.js -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>

  <style>
    /* Safety: ensure title screen shows even if styles.css has opacity fades */
    body {
      opacity: 1 !important;
    }
  </style>
</head>

<body>

  <!-- ============================
       TITLE SCREEN
  ============================= -->
  <div id="titleScreen">

    <div class="bg-fade"></div>

    <h1 class="title" id="mainTitle">ENDLESS REQUIUM</h1>
    <p class="subtitle" id="mainSubtitle">A mind that breaksâ€¦ remembers.</p>

    <div class="menu-buttons" id="menuButtons">
      <button class="btn" id="continueBtn">Continue</button>
      <button class="btn" id="newBtn">New Run</button>
      <button class="btn" id="settingsBtn">Settings</button>
      <button class="btn" id="extrasBtn">Extras</button>
    </div>

  </div>

  <!-- ============================
       TITLE SCREEN LOGIC
  ============================= -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {

      const title = document.getElementById("mainTitle");
      const subtitle = document.getElementById("mainSubtitle");
      const menu = document.getElementById("menuButtons");
      const bgFade = document.querySelector(".bg-fade");

      /* ---------------------------------------
         Fade in background first
      ---------------------------------------- */
      anime({
        targets: bgFade,
        opacity: [0, 1],
        duration: 1200,
        easing: "easeOutQuad"
      });

      /* ---------------------------------------
         Title animation
      ---------------------------------------- */
      anime({
        targets: title,
        opacity: [0, 1],
        translateY: [-40, 0],
        duration: 1400,
        delay: 200,
        easing: "easeOutExpo"
      });

      /* ---------------------------------------
         Subtitle animation
      ---------------------------------------- */
      anime({
        targets: subtitle,
        opacity: [0, 1],
        translateY: [-20, 0],
        duration: 1400,
        delay: 400,
        easing: "easeOutExpo"
      });

      /* ---------------------------------------
         Buttons appear
      ---------------------------------------- */
      anime({
        targets: menu,
        opacity: [0, 1],
        translateY: [20, 0],
        duration: 1200,
        delay: 800,
        easing: "easeOutExpo"
      });


      /* =======================================
          BUTTON LOGIC
      ======================================= */

      function fadeOut(callback) {
        anime({
          targets: "#titleScreen",
          opacity: [1, 0],
          duration: 900,
          easing: "easeInQuad",
          complete: callback
        });
      }

      /* CONTINUE */
      document.getElementById("continueBtn").addEventListener("click", () => {
        fadeOut(() => {
          window.location.href = "lore/lore.html"; // replace with actual save logic later
        });
      });

      /* NEW RUN */
      document.getElementById("newBtn").addEventListener("click", () => {
        fadeOut(() => {
          window.location.href = "lore/lore.html";
        });
      });

      /* SETTINGS */
      document.getElementById("settingsBtn").onclick = () => {
        alert("Settings menu coming soon.");
      };

      /* EXTRAS */
      document.getElementById("extrasBtn").onclick = () => {
        alert("Extras menu coming soon.");
      };

    });
  </script>

</body>
</html>

/* ============================
   RESET / BASE
   ============================ */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html, body {
  width: 100%;
  height: 100%;
  background: black;
  color: #e33;
  font-family: 'Underdog', sans-serif;
  overflow: hidden;

  /* IMPORTANT: no flex here */
  display: block;
}

/* ============================
   GLOBAL FADES
   ============================ */
body {
  opacity: 0;
  transition: opacity 1.8s ease-in-out;
}

body.fade-in  { opacity: 1; }
body.fade-out { opacity: 0 !important; }

/* ============================
   BACKGROUND
   ============================ */
#bgContainer {
  position: fixed;
  inset: 0;
  z-index: 0;
  background: transparent;
  overflow: hidden;
}

#bgContainer img {
  position: absolute;
  inset: 0;
  width: 100vw;
  height: 100vh;
  object-fit: cover;
  pointer-events: none;
}

/* ============================
   CENTER CONTENT
   ============================ */
.center-box {
  position: fixed; /* fix to viewport */
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 5; /* above bg but below inventory */
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 14px;
  text-align: center;
}
/* ============================
   TITLES (ROOMS)
   ============================ */
.title {
  font-size: clamp(2rem, 6vw, 5rem); /* scales with viewport */
  letter-spacing: 4px;
  line-height: 1;                 /* tighter line spacing */
  white-space: normal;            /* allow wrapping */
  word-break: break-word;         /* wrap long words if needed */
  text-align: center;
  max-width: 90vw;                /* prevent overflowing screen */
}

.subtitle {
  font-size: clamp(0.9rem, 2.4vw, 1.4rem);
  color: #ffd9d6;
  margin-top: 10px;
  text-align: center;
  word-break: break-word;         /* allow wrapping */
  max-width: 80vw;                /* prevent overflow */
}
/* ============================
   BUTTONS
   ============================ */
.btn {
  background: transparent;
  color: #e33;
  border: 2px solid #e33;
  padding: 10px 18px;
  font-size: 1rem;
  cursor: pointer;
  border-radius: 6px;
  transition: 0.25s ease;
}

.btn:hover {
  background: #e33;
  color: black;
}

.hidden {
  display: none;
}

/* ============================
   INVENTORY
   ============================ */
#invToggle {
  position: fixed;
  top: 20px;
  right: 20px;
  padding: 8px 16px;
  border: 2px solid red;
  background: black;
  color: red;
  cursor: pointer;
  z-index: 2000; /* fixed */
}

#inventory {
  position: fixed;
  bottom: 20px;
  right: 20px;
  min-width: 220px;
  max-width: 300px;
  padding: 12px;
  background: rgba(0,0,0,0.85);
  border: 2px solid red;
  color: red;
  display: flex;
  flex-direction: column;
  gap: 6px;

  transform: translateY(150px);
  opacity: 0;
  transition: transform 0.35s ease, opacity 0.35s ease;

  z-index: 2000; /* fixed */
}

#inventory.visible {
  transform: translateY(0);
  opacity: 1;
}

.inv-item {
  display: flex;
  align-items: center;
  gap: 10px;
  border: 2px solid red;
  padding: 6px 10px;
  background: rgba(0,0,0,0.6);
  color: white;
  border-radius: 4px;
}

.inv-icon {
  width: 32px;
  height: 32px;
  object-fit: contain;
}

/* ============================
   POPUP MESSAGE
   ============================ */
.popup-message {
  position: fixed;
  top: 20%;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0,0,0,0.85);
  color: red;
  padding: 12px 24px;
  border: 2px solid red;
  font-size: 1.1rem;
  border-radius: 6px;
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: 20;
}

/* ============================
   OVERLAYS
   ============================ */
.vignette,
.scanlines,
.grain {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 2;
}

/* ============================
   SANITY EFFECTS
   ============================ */
body[data-sanity="mid"] #bgContainer {
  filter: blur(2px) brightness(0.95) saturate(110%);
}

body[data-sanity="low"] #bgContainer {
  filter: blur(4px) brightness(0.9) saturate(130%) contrast(1.15);
}

body[data-sanity="broken"] #bgContainer {
  filter: blur(6px) hue-rotate(20deg) contrast(1.6) saturate(150%);
}

/* ============================
   TITLE SCREEN ONLY
   ============================ */
#titleScreen {
  position: fixed;
  inset: 0;
  background: black;
  z-index: 9999;

  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

#titleScreen .title,
#titleScreen .subtitle,
#titleScreen .menu-buttons {
  opacity: 0; /* Anime.js controls these */
}

.menu-buttons {
  margin-top: 40px;
}

/* ============================
   FADE OVERLAY FIX
   ============================ */
#fadeOverlay {
  position: fixed;          /* cover the viewport */
  top: 0;                   /* safe fallback for inset */
  left: 0;
  width: 100vw;
  height: 100vh;
  background: black;
  opacity: 0;                /* fully transparent by default */
  pointer-events: none;      /* clicks pass through when inactive */
  transition: opacity 1.2s ease-in-out;
  z-index: 1000;             /* behind inventory (z-index: 2000) */
}

#fadeOverlay.active {
  opacity: 1;                /* fade in */
  pointer-events: auto;      /* block interactions when active */
}
/* ============================
   INVENTORY Z-INDEX FIX
   ============================ */
#invToggle, #inventory {
  z-index: 2000; /* above overlays so button works */
}

/* ============================
   RESPONSIVE
   ============================ */
@media (max-width: 600px) {
  .title { font-size: 2.2rem; }
  .subtitle { font-size: 1rem; }
  .btn { font-size: 0.95rem; }
}